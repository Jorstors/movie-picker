
"use client";
import {
  Dialog,
  DialogTrigger,
  DialogContent,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { SpinWheel } from "react-prize-wheel";
import { Button } from "./ui/button";
import { useContext } from "react";
import { RSVPContext } from "./EventDialogue";


function SpinDialogue() {
  // Define the segments for the spin wheel
  const { RSVPs, setRSVPs } = useContext(RSVPContext);

  // Fill out segments with RSVP list
  let segments: unknown = []
  if (RSVPs) {
    RSVPs.forEach((rsvp, index) => {
      // Assign a color based on index (hex colors)
      const randomColor = Math.floor(Math.random() * 16777215);
      let hexColor = randomColor.toString(16);
      hexColor = '#' + hexColor.padStart(6, '0');
      // id, text(movie name), and color
      segments = {
        id: rsvp.id, text: rsvp.text, color: hexColor
      })
  }

  const handleSpinComplete = () => {
    console.log('Spin complete!');
  }

  return (

    <Dialog>
      <DialogTrigger asChild>
        <Button variant="default" className="text-lg py-5 px-10 hover:cursor-pointer">
          Spin!
        </Button>
      </DialogTrigger>
      <DialogContent >
        <DialogHeader>
          <DialogTitle></DialogTitle>
        </DialogHeader>
        <SpinWheel
          segments={segments}
          onSpinComplete={handleSpinComplete}
          size={300}
          showSpinButton={false}
          className="w-full"
        />
      </DialogContent>
    </Dialog>

  )
}

export default SpinDialogue;
